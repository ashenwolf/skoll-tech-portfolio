{% extends 'base.html' %}

{% block title %}{% trans %}Blog{% endtrans %} | {% endblock %}

{% block content %}
<div class="row">
	<div class="span12">
		{% if post %}
		<h1>{% trans %}Edit: {% endtrans %} {{ post }}</h1>
		{% else %}
		<h1>{% trans %}Write new blog post{% endtrans %}</h1>
		{% endif %}
		<hr />
	</div>
</div>

<div class="row">
	<div class="span10">

		{% if form.errors %}
		    <div class="errors alert">
		    	<h4 class="alert-heading">Please correct the following errors!</h4><br />
		        {% for field_name, field_errors in form.errors|dictsort if field_errors %}
		            {% for error in field_errors %}
		                <p><strong>{{ form[field_name].label.text }}</strong>: {{ error }}</p>
		            {% endfor %}
		        {% endfor %}
		    </div>
		{% endif %}

		<form class="form-horizontal" method="POST" action=".">
			<fieldset>
				<div class="control-group {% if form.title.errors %}error{% endif %}">
					{{ form.title.label(class="control-label") }}
					<div class="controls">
						{{ form.title(class="input-xlarge span8") }}
						    {% if form.username.errors %}
        					<ul class="errors">{% for error in form.username.errors %}<li>{{ error }}</li>{% endfor %}</ul>
						    {% endif %}
					</div>
				</div>
				<br />
				<div class="control-group {% if form.slug.errors %}error{% endif %}">
					{{ form.slug.label(class="control-label") }}
					<div class="controls">
						{{ form.slug(class="input-xlarge span8") }}
						<p class="help-block">Latin characterrs, numbers, dashes. No spaces!</p>
					</div>
				</div>
				<div class="control-group {% if form.teaser.errors %}error{% endif %}">
					{{ form.teaser.label(class="control-label") }}
					<div class="controls">
						{{ form.teaser(class="input-xlarge span8") }}
						<p class="help-block">No HTML allowed. Plain text only.</p>
					</div>
				</div>
				<div class="control-group {% if form.content.errors %}error{% endif %}">
					{{ form.content.label(class="control-label") }}
					<div class="controls">
						{{ form.content(class="input-xlarge span6") }}
					</div>
				</div>
				<br />
				<div class="control-group {% if form.tags.errors %}error{% endif %}">
					{{ form.tags.label(class="control-label") }}
					<div class="controls">
						{{ form.tags(class="input-xlarge span8") }}
						<p class="help-block">Comma-separated list of tags. Case insensitive.</p>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">Attached images</label>
					<div class="controls">
						<ul class="thumbnails row">
						  <li class="span2">
							<a href="#" class="thumbnail"><img src="http://placehold.it/220x140" alt="" /></a>
						  </li>

						  <li class="span2">
							<a href="#" class="thumbnail"><img src="http://placehold.it/220x140" alt="" /></a>
						  </li>

						  <li class="span2">
							<a href="#" class="thumbnail"><img src="http://placehold.it/220x140" alt="" /></a>
						  </li>

						  <li class="span2">
							<a href="#" class="thumbnail"><img src="http://placehold.it/220x140" alt="" /></a>
						  </li>
						</ul>
					</div>
				</div>
			</fieldset>
		</form>
	</div>
	<div class="span2">

		<a href="#" onclick="document.forms[0].submit();return false;" class="btn btn-large "><i class="icon-ok-sign"></i> {% trans %}Save post{% endtrans %}</a>
	</div>
</div>

<div class="row">
	<div class="span12">
	</div>
</div>

<script src="/static/ckeditor/ckeditor.js" type="text/javascript"></script>

<script>
	$.noConflict();

	jQuery(document).ready(function($) {
		CKEDITOR.replace('content', {
			//toolbar: 'Basic',
			toolbar: [
					{ name: 'styles', items : [ 'Format' ] },
					{ name: 'basicstyles', items : [ 'Bold','Italic','Strike','-','RemoveFormat' ] },
					{ name: 'paragraph', items : [ 'NumberedList','BulletedList','-','Outdent','Indent' ] },
					{ name: 'links', items : [ 'Link','Unlink','Anchor' ] },
					{ name: 'insert', items : [ 'Image' ] },
				],
			skin: 'BootstrapCK-Skin',
			language: 'en',
			resize_enabled: false,
		}); 
	});
</script>
{% endblock %}
